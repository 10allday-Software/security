{
  "AWSTemplateFormatVersion":"2010-09-09",
  "Description":"Create Account Updates SNS Topic",
  "Metadata":{
    "Source":"https://github.com/mozilla/security/tree/master/operations/cloudformation-templates"
  },
  "Resources":{
    "AccountUpdatesTopic":{
      "Type":"AWS::SNS::Topic",
      "Properties":{
        "DisplayName":"Topic for Mozilla accounts to publish updates to",
        "TopicName":"AccountUpdates"
      }
    },
    "AccountUpdatesTopicPolicy":{
      "Type":"AWS::SNS::TopicPolicy",
      "Properties":{
        "Topics":[
          {
            "Ref":"AccountUpdatesTopic"
          }
        ],
        "PolicyDocument":{
          "Version":"2012-10-17",
          "Id":"AccountUpdatesPolicy",
          "Statement":[
            {
              "Action":"SNS:Publish",
              "Principal":{
                "AWS":"*"
              },
              "Resource":{
                "Ref":"AccountUpdatesTopic"
              },
              "Effect":"Allow",
              "Sid":"AccountUpdatesPublisher"
            },
            {
              "Action":[
                "SNS:GetTopicAttributes",
                "SNS:ListSubscriptionsByTopic",
                "SNS:Subscribe"
              ],
              "Principal":{
                "AWS":[
                  "arn:aws:iam::371522382791:root"
                ]
              },
              "Resource":{
                "Ref":"AccountUpdatesTopic"
              },
              "Effect":"Allow",
              "Sid":"AccountUpdatesSubscriber"
            }
          ]
        }
      }
    }
  }
}